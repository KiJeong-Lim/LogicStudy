\documentclass[12pt]{paper}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{color}
\usepackage{stmaryrd}
\usepackage[bottom]{footmisc}
\usepackage[a4paper, left=20mm, right=20mm, top=20mm, bottom=20mm]{geometry}
\usepackage{graphicx}
\usepackage{kotex}
\usepackage{proof}
\usepackage{listings}
\usepackage{setspace}
\usepackage{enumitem}
\usepackage{array,multirow}
\usepackage{hyperref}
\usepackage[table]{xcolor}

\newcommand{\gnum}
{ \mathfrak{g} }

\newenvironment{context}[1][]
{ \noindent \textbf{{#1}.} }
{ \hfill $ \dashv $ }

\newcommand{\coqstyle}
{ \lstset
  { basicstyle = \footnotesize\ttfamily
  , breakatwhitespace = false
  , breaklines = true
  , frame = single
  , keywordstyle = \color{blue}
  , morekeywords =
    { as
    , Defined
    , Definition
    , else
    , end
    , Example
    , Export
    , Fixpoint
    , forall
    , From
    , fun
    , if
    , in
    , Import
    , Inductive
    , Lemma
    , let
    , Ltac
    , match
    , Proof
    , Prop
    , Qed
    , Require
    , return
    , Set
    , struct
    , then
    , Theorem
    , Type
    , with
    }
  , tabsize = 2
  }
}

\lstnewenvironment{coqcode}[1][]
{ \setstretch{1.0}
  \coqstyle
  \lstset{#1}
}
{ \setstretch{1.5} }

\title{일차논리 메타정리}
\author{임기정}

\begin{document}

\maketitle

\section{Generalized Weakening}

Let $\eta$ be a variable renaming. Then,
$$\infer{\Gamma^{\prime} \left[ \eta \right] \vdash \varphi \left[ \eta \right]}{\Gamma \subseteq \Gamma^{\prime} & \qquad & \Gamma \vdash \varphi}$$

\subsection[]{$\forall$-case}

\begin{enumerate}
\item [(1)] $y \notin \mathrm{FV} \left( \Gamma \right)$
\item [(2)] $y \notin \mathrm{FV} \left( \left( \forall x \right) \varphi \right)$
\item [(3)] $\Gamma \vdash \varphi \llbracket x := y \rrbracket$
\item [(4)] $\Gamma \subseteq \Gamma^{\prime}$
\item [(G)] $\Gamma^{\prime} \left[ \eta \right] \vdash \left( \forall x \varphi \right) \left[ \eta \right]$
\end{enumerate}
\begin{proof} Let $z$ be a fresh variable. Since $\Gamma \left[ y := z \right] \subseteq \Gamma^{\prime} \left[ y := z \right]$,
\begin{align*}
& \Gamma^{\prime} \left[ \eta \right] \vdash \left( \forall x \varphi \right) \left[ \eta \right] \\
& \impliedby \Gamma^{\prime} \left[ \eta \right] \vdash \forall x \left( \varphi \left[ \eta \right] \right) \\
& \impliedby \Gamma^{\prime} \left[ y := z \right] \left[ z := \eta \left( y \right) ; \eta \right] \vdash \forall x \left( \varphi \left[ \eta \right] \right) \\
& \impliedby \Gamma^{\prime} \left[ y := z \right] \left[ z := \eta \left( y \right) ; \eta \right] \vdash \forall x \left( \varphi \left[ z := \eta \left( y \right) ; \eta \right] \right) \\
& \impliedby \Gamma^{\prime} \left[ y := z \right] \left[ z := \eta \left( y \right) ; \eta \right] \vdash \varphi \left[ z := \eta \left( y \right) ; \eta \right] \llbracket x := z \rrbracket \\
& \impliedby \Gamma^{\prime} \left[ y := z \right] \left[ z := \eta \left( y \right) ; \eta \right] \vdash \varphi \left[ y := z ; z := \eta \left( y \right) ; \eta \right] \llbracket x := z \rrbracket \\
& \impliedby \Gamma^{\prime} \left[ y := z \right] \left[ z := \eta \left( y \right) ; \eta \right] \vdash \varphi \left[ y := z ; z := \eta \left( y \right) ; \eta \right] \llbracket x := y \left[ y := z ; z := \eta \left( y \right) ; \eta \right] \rrbracket \\
& \impliedby \Gamma^{\prime} \left[ y := z \right] \left[ z := \eta \left( y \right) ; \eta \right] \vdash \varphi \llbracket x := y \rrbracket \left[ y := z ; z := \eta \left( y \right) ; \eta \right] \\
& \impliedby \Gamma^{\prime} \left[ y := z \right] \left[ y := z ; z := \eta \left( y \right) ; \eta \right] \vdash \varphi \llbracket x := y \rrbracket \left[ y := z ; z := \eta \left( y \right) ; \eta \right] \\
& \impliedby
\begin{cases}
\Gamma \subseteq \Gamma^{\prime} \left[ y := z \right] , \\
\Gamma \vdash \varphi \llbracket x := y \rrbracket .
\end{cases}
\end{align*}
\end{proof}

\begin{context}[Discussion 1]
Does it hold $\varphi \left[ x := x ; \eta \right] \llbracket x := z \rrbracket \equiv \varphi \llbracket x := y \rrbracket \left[ y := z ; z := \eta \left( y \right) ; \eta \right]$? \newline
I hope so... -- 2024/07/15 09:46 
\end{context}

\newpage

\begin{context}[Discussion 2]
Consider $\varphi \left[ x := x ; \eta \right] \llbracket x := z \rrbracket$.
\begin{align*}
& \varphi \left[ x := x ; \eta \right] \llbracket x := z \rrbracket \\
& \equiv \varphi \left[ x := x ; z := \eta \left( y \right) ; \eta \right] \llbracket x := z \rrbracket \\
& \equiv \varphi \left[ x := z ; z := \eta \left( y \right) ; \eta \right] \llbracket x := z \rrbracket \\
& \equiv \varphi \left[ x := z ; y := z ; z := \eta \left( y \right) ; \eta \right] \llbracket x := z \rrbracket \\
& \equiv \varphi \left[ x := z ; y := z ; z := \eta \left( y \right) ; \eta \right] \llbracket x := y \left[ x := z ; y := z ; z := \eta \left( y \right) ; \eta \right] \rrbracket \\
& \equiv \varphi \llbracket x := y \rrbracket \left[ x := z ; y := z ; z := \eta \left( y \right) ; \eta \right] \\
& \equiv \varphi \llbracket x := y \rrbracket \left[ y := z ; z := \eta \left( y \right) ; \eta \right]
\end{align*}
Did I make a mistake? To check it out, let
\begin{enumerate}
\item [(a)] $ \varphi : \equiv \varphi \left( x , u \right)$ with $ u \not\equiv x $;
\item [(b)] $ y \equiv x \lor \left( y \not\equiv x \land y \not\equiv u \right) $ -- i.e., $ y \notin \mathrm{FV} \left( \forall x \varphi \right) $;
\item [(c)] $\eta$ be a variable renaming -- i.e., $ \eta \in \mathbb{L} \left( \mathbb{V} \times \mathbb{V} \right) $; and
\item [(d)] $z$ be a fresh -- i.e., $z \not\equiv x \land z \not\equiv y \land z \not\equiv u \land z \notin \mathrm{Dom} \left( \eta \right) \cup \mathrm{Cod} \left( \eta \right)$.
\end{enumerate}
Then, the L.H.S. is
\begin{align*}
\varphi \left[ x := x ; \eta \right] \left[ x := z \right]
& \equiv \varphi \left( x , u \right) \left[ x := x ; \eta \right] \left[ x := z \right] \\
& \equiv \varphi \left( x , \eta \left( u \right) \right) \left[ x := z \right] \\
& \equiv \varphi \left( z , \left( \eta \left( u \right) \right) \left[ x := z \right] \right) .
\end{align*}
On the other hand, the R.H.S. is $\varphi \left( z , \eta \left( u \right) \right) \equiv \varphi \left[ x := z ; \eta \right]$.
\end{context}

\end{document}
